
# 설정 항목

### 셋업 툴의 설정 항목

<img
src={require('/img/marshmallowPB/setup.png').default}
style={{ width: '80%' }}
/>

---

### 기본 설정

#### 프리셋

여기서 아바타 프리셋을 선택합니다.

#### 가슴 본

아바타의 가슴 본을 선택하는 곳입니다.

#### 가슴 크기(blendshape)

대응 아바타 전용 **가슴을 크게 만드는 셰이프키**의 값을 설정합니다.  
가슴을 작게 만드는 셰이프키는 대응하지 않으므로, 비대응 아바타처럼 설정해 주세요.

#### 가슴 본 Y 스케일(Transform)

가슴 본의 **Y 스케일** 값을 입력합니다. X와 Z 스케일 값은 필요 없습니다.  
실제 가슴 본의 X, Y, Z 스케일 값이 제각각이어도 문제 없이 동작합니다.

#### PB 프리셋

PhysBone 프리셋을 선택하는 곳입니다.  
흔들림은 「스무스」, 「푸루푸루(ぷるぷる)」, 「타윤타윤(たゆんたゆん)」 3종류가 있고, 각각 강도(딱딱함/부드러움)를 3단계에서 고를 수 있습니다.

---

### PhysBone

#### Pull

PhysBone의 원래 형태로 복원하려는 힘입니다.

#### Momentum

PhysBone의 스프링 강도 파라미터입니다.

#### Stiffness

PhysBone이 구부러지지 않으려는 정도(흔들림 억제) 파라미터입니다.

#### Gravity

PhysBone에 작용하는 중력의 강도 파라미터입니다.

#### GravityFalloff

초기 각도에서 벗어날수록 중력의 영향을 얼마나 받는지를 결정하는 파라미터입니다.

#### Immobile

PhysBone이 쉽게 움직이지 않는 정도를 나타내는 파라미터입니다. 이 값은 콜라이더로 누를 때의 동작에는 영향을 주지 않습니다.

#### LimitAngle

PhysBone의 회전 제한 각도입니다.

#### CollisionRadius

PhysBone 콜라이더의 크기입니다. 값을 크게 하면 가슴을 터치했을 때 판정 범위가 커집니다.

#### LimitColliderPosition

관통 방지를 위한 콜라이더 위치 파라미터입니다. 약간 값을 높이면 관통 대책에 효과적입니다.  
(예: 0.135 → 0.18)

#### StretchMotion

PhysBone의 찌그러짐 관련 관성 파라미터입니다. 아바타가 전진할 때 가슴이 관성으로 찌그러지는 정도를 결정합니다.

#### MaxStretch

PhysBone이 늘어날 수 있는 최대치입니다. 값이 클수록 길게 늘어납니다.

#### MaxSquish

PhysBone이 찌그러질 수 있는 최대치입니다. 값이 클수록 깊이 찌그러집니다. 반대로 작게 하면 얕게 찌그러져 관통을 줄일 수 있습니다.

#### Collider

PhysBone에 간섭하는 콜라이더입니다. 최대 6개까지 설정할 수 있습니다.

---

### 상세 설정

#### 잡기 기능

PhysBone을 잡을 수 있는지 여부를 설정합니다.

#### 바닥 콜라이더

PhysBone이 바닥과 간섭하는지 여부를 설정합니다.

#### 다른 플레이어와의 가슴 간섭

마시마로 PB가 적용된 다른 플레이어와 가슴끼리 간섭하도록 설정합니다. 기본 머리 콜라이더와도 간섭이 가능합니다.

#### 가슴 흔들림 회전

흔들릴 때 타원 형태로 움직일지(ON), 평행으로 움직일지(OFF)를 설정합니다.  
OFF로 하면 평행으로 흔들리므로 위쪽 방향 움직임이 제약됩니다. 어색하면 OFF로 설정하세요.

#### 양쪽 가슴 간섭

아바타의 왼쪽・오른쪽 가슴끼리 서로 간섭하는 콜라이더를 배치할지 여부입니다.

#### 간섭용 콜라이더의 크기

양쪽 가슴끼리 간섭할 때 사용하는 콜라이더의 크기를 설정합니다.

#### 가슴 본 회전 기여도

PhysBone의 회전이 가슴 본에 어느 정도 영향을 미치는지 조정합니다. 0으로 하면 가슴 본이 평행 이동만 하게 됩니다. 옷에 따라 다르지만, 0에 가까울수록 관통이 줄어들 수 있습니다. (가슴 본의 Rotation Constraint의 Weight에 해당)

#### 찌그러짐 애니메이션의 강도

가슴 찌그러짐 애니메이션의 강도를 조정합니다. 가슴이 클 경우 좌우로 너무 퍼져 보일 수 있으므로, 이 값을 줄이면 자연스러워집니다. (가슴 본의 Scale Constraint Weight에 해당)

#### 가슴 처짐 정도

숙였을 때 가슴이 처지는 최대치를 설정합니다. 0으로 하면 처지지 않습니다.

#### 가슴의 찌그러지기 쉬움(등을 댔을 때)

등을 대고 누웠을 때 가슴이 찌그러지는 최대치를 설정합니다. 0으로 하면 찌그러지지 않습니다.

---

### 고급 설정

#### 찌그러짐 기능만 적용(원본 PB 사용)

아바타의 원본 PB를 남긴 채, 마시마로 PB의 찌그러짐 기능만을 적용합니다. 구체적으로는 마시마로 PB의 흔들림 기능을 OFF로 하고, 원본 PB를 그대로 사용합니다. 이 경우 PB의 Allow Grabbing은 OFF로 하는 것이 좋습니다.

#### 찌그러짐 기능 OFF(관통 대책)

마시마로 PB가 찌그러지지 않게 설정합니다. 흔들림 기능만 유지됩니다. 어쩔 수 없이 옷 관통이 심할 경우 켜 주세요.

#### 중력 기능 OFF

마시마로 PB가 등을 대고 있을 때 찌그러지거나 숙였을 때 늘어나는 동작을 무효화합니다. PB의 Gravity 파라미터 자체가 꺼지는 것은 아닙니다.

#### 배하의 PB를 전부 삭제

선택한 가슴 본 하위에 있는 PB를 전부 삭제합니다. 기본적으로는 가슴 본에 설정된 PB만 삭제되지만, 비대응 아바타가 복잡한 PB 구조를 가질 경우 ON으로 해 주세요.

#### 오브젝트의 Transform을 오프셋으로 사용

marshmallow_PB_Setup의 위치를 마시마로 PB의 위치・회전・스케일 오프셋으로 사용합니다.  
힐을 신은 등의 이유로 아바타가 위로 이동했을 때, 일반 프리셋에서는 마시마로 PB의 위치가 어긋날 수 있습니다. 이 경우 이 기능을 켠 후 marshmallow_PB_Setup을 원점에서 같은 만큼 위로 이동시키면 어긋나지 않습니다.  
마시마로 PB가 어긋나는 문제가 생기면 이 기능으로 조정할 수 있습니다.

