---
sidebar_position: 3
---

# 調整方法
### セットアップツールの設定項目

<img
  src={require('/img/setup.png').default}
  style={{ width: '400px' }}
/>

---
### 基本設定  

#### プリセット
対応アバターを選択する場所です。

#### 胸ボーン  
胸ボーンを選択する場所です。

#### 胸の大きさ(blendshape)  
対応アバターの**胸を大きくするシェイプキー**の値を設定します。小さくするシェイプキーで設定したい場合は非対応アバターと同様に設定してください。胸を小さくするシェイプキーは対応していないので、非対応アバターと同様に設定して下さい。

#### 胸ボーンのYスケール値(Transform)  
胸ボーンのスケールを変えている場合はYスケール値を入れてください。XとZのスケール値は必要ありません。なお、胸ボーンのXYZのスケール値がそれぞれ異なっていても問題なく機能します。

#### PBプリセット  
PBのプリセットを選択する場所です。「なめらか、ぷるぷる、たゆんたゆん」の3種類が存在します。硬さはそれぞれ3段階から選べます。

---

### PhysBone  

#### Pull  
PBの形状を戻す強さのパラメータです。

#### Momentum  
PBのばねの強さのパラメータです。

#### Stiffness  
PBの曲がりにくさ(ブレにくさ)のパラメータです。  

#### Gravity  
PBにかかる重力の強さのパラメータです。

#### GravityFalloff  
PBの重力に対してどれだけ形状を保持するかのパラメータです。元の角度からずれると効果は小さくなり、重力の影響を受けるようになります。

#### Immobile  
PBの動きにくさのパラメータです。この値はコライダーによる動作には影響しません。

#### LImitAngle  
PBの制限角度です。

#### CollisionRadius  
PBコライダーの大きさです。この値を大きくすると胸を触った時の判定が大きくなります。

#### LimitColliderPosition  
貫通防止用のPBを制限するコライダーの位置のパラメーターです。この値を適度に上げると貫通対策に有効です。(0.135→0.18程度)

#### StretchMotion  
PBののつぶれやすさの慣性パラメータです。この値が大きい場合、アバターが前進した際に胸は慣性を強く受けてつぶれます。

#### MaxStretch  
PBの伸びの最大値です。この値を大きくするとPBは長く伸びます。

#### MaxSquish  
PBのつぶれる最大値です。この値を大きくするとPBは深くつぶれます。小さくすると浅くつぶれるようになるので、貫通しにくくなります。

#### Collider  
PBに干渉するコライダーです。6つまで設定できます。

---

### 詳細設定 

#### 掴み機能  
PBを掴めるかどうかを設定します。

#### 床コライダー  
PBが床に干渉するかどうかを設定します。

#### 他プレイヤーとの胸干渉  
ましゅまろPBを入れた他プレイヤーと胸同士で干渉する機能を設定します。胸以外に頭のデフォルトコライダーとも干渉ができます。

#### 胸揺れの回転  
胸揺れ時に横方向に回転するかどうかを設定します。オフの場合は平行に揺れます。  
基本的にプリセットがたゆんたゆんの場合にのみ効果があります。胸の上方向への可動域が制限されるため、気になる場合はオフにして下さい。

#### 両胸同士の干渉  
アバターの両胸同士で干渉するコライダーを設置するかどうかを設定します。

#### 干渉用コライダーの大きさ  
胸同士で干渉するコライダーの大きさを設定します。

#### 胸の回転の寄与度   
ましゅまろPBの動作がどのくらい胸ボーンの回転に寄与するかを調整します。0にすると胸ボーンが平行に動きます。服にもよりますが、0に近づけるほど貫通しにくくなります。胸ボーンのRotation ConstraintのWeightに相当します。

#### つぶれアニメーションの強さ  
胸のつぶれアニメーションの強度を調整します。胸が大きい場合、横方向に潰れすぎてしまいますが、このパラメータを小さくすると自然になります。胸ボーンのScale ConstraintのWeightに相当します。

#### 胸の垂れ下がりやすさ  
屈んだ際の胸の垂れ下がりの最大値を設定します。0に設定するとほとんど垂れ下がらなくなります。

#### 胸のつぶれやすさ(仰向け)
仰向けになった際の胸のつぶれの最大値を設定します。0に設定するとほとんどつぶれなくなります。

---

### 高度な設定
#### つぶれ機能のみ適用(元のPBを使用)  
アバターの元のPBをそのままに、ましゅまろPBのつぶれる機能のみを適用します。具体的にはましゅまろPBの揺れ機能をオフにした状態で、元のPBを残しています。使用する場合、元のPBのAllow Grabbingはオフにすることを推奨します。

#### つぶれ機能オフ(貫通対策)  
ましゅまろPBがつぶれないようになり、揺れ機能のみ適用されます。どうしても貫通してしまう服の場合はオンにして下さい。

#### 重力機能オフ  
ましゅまろPBが仰向けの場合につぶれなくなり、屈んだ場合に伸びなくなります。ましゅまろPBの重力再現の機構を無効化するため、PBのGravityパラメータは無効化されません。

#### 配下のPBを全削除  
設定した胸ボーンの配下に存在するPBを全削除します。通常は胸ボーンに設定されたPBのみ削除されます。アバターが複雑なPB構造を持つ場合はオンにして下さい。

#### オフセットとしてこのオブジェクトのTransformを使用  
ましゅまろPBの設定位置・回転・スケールのオフセットとしてmarshmallow_PB_Setupの位置を使用します。  
ヒールを履くなどしてアバターの位置が上方向に移動する場合は通常のプリセットではましゅまろPBの位置がズレてしまいます。そのような場合にこの機能をオンにし、marshmallow_PB_Setupを原点から同じだけ上方向に移動するとズレなくなります。  
blenderでサイズ変更した対応アバターを使用する場合もこの機能をオンにし、marshmallow_PB_Setupのスケールを変更して下さい。