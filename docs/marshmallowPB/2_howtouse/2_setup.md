# 設定項目

### セットアップツールの設定項目

<img
src={require('/img/setup.png').default}
style={{ width: '400px' }}
/>

---

### 基本設定

#### プリセット

対応アバターを選択する場所です。

#### 胸ボーン

胸ボーンを選択する場所です。

#### 胸の大きさ(blendshape)

対応アバターの**胸を大きくするシェイプキー**の値を設定します。小さくするシェイプキーで設定したい場合は非対応アバターと同様に設定してください。胸を小さくするシェイプキーは対応していないので、非対応アバターと同様に設定して下さい。

#### 胸ボーンの Y スケール値(Transform)

胸ボーンのスケールを変えている場合は Y スケール値を入れてください。X と Z のスケール値は必要ありません。なお、胸ボーンの XYZ のスケール値がそれぞれ異なっていても問題なく機能します。

#### PB プリセット

PB のプリセットを選択する場所です。「なめらか、ぷるぷる、たゆんたゆん」の 3 種類が存在します。硬さはそれぞれ 3 段階から選べます。

---

### PhysBone

#### Pull

PB の形状を戻す強さのパラメータです。

#### Momentum

PB のばねの強さのパラメータです。

#### Stiffness

PB の曲がりにくさ(ブレにくさ)のパラメータです。

#### Gravity

PB にかかる重力の強さのパラメータです。

#### GravityFalloff

PB の重力に対してどれだけ形状を保持するかのパラメータです。元の角度からずれると効果は小さくなり、重力の影響を受けるようになります。

#### Immobile

PB の動きにくさのパラメータです。この値はコライダーによる動作には影響しません。

#### LImitAngle

PB の制限角度です。

#### CollisionRadius

PB コライダーの大きさです。この値を大きくすると胸を触った時の判定が大きくなります。

#### LimitColliderPosition

貫通防止用の PB を制限するコライダーの位置のパラメーターです。この値を適度に上げると貫通対策に有効です。(0.135→0.18 程度)

#### StretchMotion

PB ののつぶれやすさの慣性パラメータです。この値が大きい場合、アバターが前進した際に胸は慣性を強く受けてつぶれます。

#### MaxStretch

PB の伸びの最大値です。この値を大きくすると PB は長く伸びます。

#### MaxSquish

PB のつぶれる最大値です。この値を大きくすると PB は深くつぶれます。小さくすると浅くつぶれるようになるので、貫通しにくくなります。

#### Collider

PB に干渉するコライダーです。6 つまで設定できます。

---

### 詳細設定

#### 掴み機能

PB を掴めるかどうかを設定します。

#### 床コライダー

PB が床に干渉するかどうかを設定します。

#### 他プレイヤーとの胸干渉

ましゅまろ PB を入れた他プレイヤーと胸同士で干渉する機能を設定します。胸以外に頭のデフォルトコライダーとも干渉ができます。

#### 胸揺れの回転

胸揺れ時に横方向に回転するかどうかを設定します。オフの場合は平行に揺れます。  
基本的にプリセットがたゆんたゆんの場合にのみ効果があります。胸の上方向への可動域が制限されるため、気になる場合はオフにして下さい。

#### 両胸同士の干渉

アバターの両胸同士で干渉するコライダーを設置するかどうかを設定します。

#### 干渉用コライダーの大きさ

胸同士で干渉するコライダーの大きさを設定します。

#### 胸の回転の寄与度

ましゅまろ PB の動作がどのくらい胸ボーンの回転に寄与するかを調整します。0 にすると胸ボーンが平行に動きます。服にもよりますが、0 に近づけるほど貫通しにくくなります。胸ボーンの Rotation Constraint の Weight に相当します。

#### つぶれアニメーションの強さ

胸のつぶれアニメーションの強度を調整します。胸が大きい場合、横方向に潰れすぎてしまいますが、このパラメータを小さくすると自然になります。胸ボーンの Scale Constraint の Weight に相当します。

#### 胸の垂れ下がりやすさ

屈んだ際の胸の垂れ下がりの最大値を設定します。0 に設定するとほとんど垂れ下がらなくなります。

#### 胸のつぶれやすさ(仰向け)

仰向けになった際の胸のつぶれの最大値を設定します。0 に設定するとほとんどつぶれなくなります。

---

### 高度な設定

#### つぶれ機能のみ適用(元の PB を使用)

アバターの元の PB をそのままに、ましゅまろ PB のつぶれる機能のみを適用します。具体的にはましゅまろ PB の揺れ機能をオフにした状態で、元の PB を残しています。使用する場合、元の PB の Allow Grabbing はオフにすることを推奨します。

#### つぶれ機能オフ(貫通対策)

ましゅまろ PB がつぶれないようになり、揺れ機能のみ適用されます。どうしても貫通してしまう服の場合はオンにして下さい。

#### 重力機能オフ

ましゅまろ PB が仰向けの場合につぶれなくなり、屈んだ場合に伸びなくなります。ましゅまろ PB の重力再現の機構を無効化するため、PB の Gravity パラメータは無効化されません。

#### 配下の PB を全削除

設定した胸ボーンの配下に存在する PB を全削除します。通常は胸ボーンに設定された PB のみ削除されます。アバターが複雑な PB 構造を持つ場合はオンにして下さい。

#### オフセットとしてこのオブジェクトの Transform を使用

ましゅまろ PB の設定位置・回転・スケールのオフセットとして marshmallow_PB_Setup の位置を使用します。  
ヒールを履くなどしてアバターの位置が上方向に移動する場合は通常のプリセットではましゅまろ PB の位置がズレてしまいます。そのような場合にこの機能をオンにし、marshmallow_PB_Setup を原点から同じだけ上方向に移動するとズレなくなります。  
blender でサイズ変更した対応アバターを使用する場合もこの機能をオンにし、marshmallow_PB_Setup のスケールを変更して下さい。
